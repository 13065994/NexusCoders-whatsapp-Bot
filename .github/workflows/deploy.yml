name: Deploy NexusCoders Bot

on:
  push:
    branches:
      - main

jobs:
  deploy-render:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Render
        env:
          RENDER_API_KEY: ${{ secrets.RENDER_API_KEY }}
          RENDER_SERVICE_ID: ${{ secrets.RENDER_SERVICE_ID }}
        run: |
          curl -X POST https://api.render.com/v1/deploys \
          -H "Authorization: Bearer $RENDER_API_KEY" \
          -H "Content-Type: application/json" \
          -d '{"serviceId": "'"$RENDER_SERVICE_ID"'"}'

  deploy-heroku:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: akhileshns/heroku-deploy@v3.12.12
        with:
          heroku_api_key: ${{secrets.HEROKU_API_KEY}}
          heroku_app_name: ${{secrets.HEROKU_APP_NAME}}
          heroku_email: ${{secrets.HEROKU_EMAIL}}

  deploy-koyeb:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Deploy to Koyeb
        uses: koyeb/action-git-deploy@v1
        with:
          app-name: nexuscoders-bot
          service-name: bot
          service-env: '{"PORT": "3000"}'
          git-branch: main
        env:
          KOYEB_API_TOKEN: ${{ secrets.KOYEB_API_TOKEN }}

  deploy-replit:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: replit/replit-deploy@v1
        with:
          repl-id: ${{ secrets.REPLIT_ID }}
          token: ${{ secrets.REPLIT_TOKEN }}
